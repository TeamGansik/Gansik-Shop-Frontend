<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Main</title>
    <link rel="stylesheet" href="reset.css">
    <link rel="stylesheet" href="mainStyle.css">
    <script src="//code.jquery.com/jquery-1.12.0.min.js"></script>
</head>
<header>
    <div id="header-placeholder"></div>
</header>

<body>
    <!-- ë°°ê²½-->
    <div class="background-container">
        <div class="all-container">
            <!-- ì´ë¯¸ì§€ ìŠ¬ë¼ì´ë” -->
            <div class="slider__wrap">
                <div class="slider__img">
                    <div class="slider__inner">
                        <div class="slider" role="group" aria-label="1/5"><img src="/images/slide01.png" alt="ì´ë¯¸ì§€1">
                        </div>
                        <div class="slider" role="group" aria-label="2/5"><img src="/images/slide02.png" alt="ì´ë¯¸ì§€2">
                        </div>
                        <div class="slider" role="group" aria-label="3/5"><img src="/images/slide03.png" alt="ì´ë¯¸ì§€3">
                        </div>
                        <div class="slider" role="group" aria-label="4/5"><img src="/images/slide04.png" alt="ì´ë¯¸ì§€4">
                        </div>
                    </div>
                </div>
                <div class="slider__btn">
                    <a href="#" class="prev" role="button" aria-label="ì™¼ìª½ ì´ë¯¸ì§€" style="transform: translateX(-6.8px);">
                        <</a>
                            <a href="#" class="next" role="button" aria-label="ì˜¤ë¥¸ìª½ ì´ë¯¸ì§€">></a>
                </div>
                <div class="slider__dot">
                    <a href="#" class="dot_active"></a>
                    <a href="#" class="dot_active"></a>
                    <a href="#" class="dot_active"></a>
                    <a href="#" class="dot_active"></a>
                    <a href="#" class="dot_active"></a>
                </div>
            </div>

            <script>
                const sliderWrap = document.querySelector(".slider__wrap");
                const sliderImg = document.querySelector(".slider__img");
                const sliderInner = document.querySelector(".slider__inner");
                const slider = document.querySelectorAll(".slider");
                const sliderDot = document.querySelector(".slider__dot");

                let currentIndex = 0;
                let sliderCount = slider.length;
                let sliderWidth = sliderImg.offsetWidth;
                let dotIndex = "";

                // ì´ˆê¸°ê°’ ì„¤ì • í•¨ìˆ˜ init()
                function init() {

                    slider.forEach(() => { dotIndex += "<a href='#' class='dot'>ì´ë¯¸ì§€1</a>"; });
                    sliderDot.innerHTML = dotIndex;
                    sliderDot.firstChild.classList.add("active");
                }
                init();

                function gotoSlider(num) {
                    sliderInner.style.transition = "all 400ms";
                    sliderInner.style.transform = "translateX(" + -sliderWidth * num + "px)";
                    currentIndex = num;

                    let dotActive = document.querySelectorAll(".slider__dot .dot");
                    dotActive.forEach(el => el.classList.remove("active"));
                    dotActive[num].classList.add("active");
                }

                // ë²„íŠ¼ í´ë¦­í–ˆì„ ë•Œ
                document.querySelectorAll(".slider__btn a").forEach((btn, index) => {
                    btn.addEventListener("click", () => {
                        let prevIndex = (currentIndex + (sliderCount - 1)) % sliderCount;
                        let nextIndex = (currentIndex + 1) % sliderCount;

                        if (btn.classList.contains("prev")) {
                            gotoSlider(prevIndex);
                        } else {
                            gotoSlider(nextIndex);
                        }
                    });
                })

                // ë‹· ë²„íŠ¼ì„ í´ë¦­í–ˆì„ ë•Œ í•´ë‹¹ ì´ë¯¸ì§€ë¡œ ì´ë™
                document.querySelectorAll(".slider__dot .dot").forEach((dot, index) => {
                    dot.addEventListener("click", () => {
                        gotoSlider(index);
                    });
                })

                //ìë™ ìŠ¬ë¼ì´ë“œ 
                function startAutoSlide() {
                    setInterval(() => {
                        let nextIndex = (currentIndex + 1) % sliderCount;
                        gotoSlider(nextIndex);
                    }, 5000); //5000 = 5ì´ˆ
                }

                startAutoSlide();
            </script>


            <!-- í™ˆ ì¹´í…Œê³ ë¦¬ ë©”ë‰´ -->
            <div class="box-container">
                <div class="box-liner">
                    <ul class="homeCategory">
                        <li>
                            <img src="/images/01.png">
                            ì¥ë‚  <br> ì¿ í°íŒ©
                        </li>
                        <li>
                            <img src="/images/02.png">
                            ì‡ì‡ë”œ
                        </li>
                        <li>
                            <img src="/images/03.png">
                            ì‡ì‡ì´ <br> ë§Œë“ 
                        </li>
                        <li>
                            <img src="/images/04.png">
                            ê°„ì‹ê±°ë¦¬ <br> ìµœì €ê°€
                        </li>
                        <li>
                            <img src="/images/05.png">
                            ìŒë£Œ <br> ìµœì €ê°€
                        </li>
                        <li>
                            <img src="/images/06.png">
                            ì†ŒëŸ‰ <br> ìƒí’ˆê´€
                        </li>
                        <li>
                            <img src="/images/07.png">
                            ë‹¹ì¼ë°°ì†¡
                        </li>
                        <li>
                            <img src="/images/08.png">
                            ì‡ì‡ì¶”ì²œ
                        </li>
                        <li>
                            <img src="/images/09.png">
                            ì¬ê³ ì •ë¦¬ <br> íŠ¹ê°€
                        </li>
                        <li>
                            <img src="/images/10.png">
                            ì¥ë°”êµ¬ë‹ˆ
                        </li>
                    </ul>
                </div>
            </div>

            <!-- ìµœì‹  ìƒí’ˆ ìˆœ -->
            <div class="newContainer">
                <div class="alertBox">
                    <div class="left-txt">
                        <p>ì—°íœ´ ì „, ì €ë ´í•  ë•Œ ë¯¸ë¦¬ êµ¬ë§¤í•˜ì„¸ìš”</p>
                        <p style="font-weight: bold; font-size: 24px; margin-top: 15px;">
                            ğŸŠì‡ì‡ì˜ ì‹ ì œí’ˆ ëª¨ìŒì§‘ğŸŠ</p>
                    </div>
                    <img src="/images/snack.png" alt="ê³¼ì ì´ë¯¸ì§€">
                </div>
                <div class="product">
                    <div class="product-item">
                        <img src="/images/testProduct.image.jpg">
                        <span>ìƒí’ˆ ì´ë¦„</span>
                        <span style="font-size: 16px; font-weight: bold;">10,000ì›</span>
                    </div>
                    <div class="product-item">
                        <img src="/images/testProduct.image.jpg">
                        <span>ìƒí’ˆ ì´ë¦„</span>
                        <span style="font-size: 16px; font-weight: bold;">10,000ì›</span>
                    </div>
                    <div class="product-item">
                        <img src="/images/testProduct.image.jpg">
                        <span>ìƒí’ˆ ì´ë¦„</span>
                        <span style="font-size: 16px; font-weight: bold;">10,000ì›</span>
                    </div>
                    <div class="product-item">
                        <img src="/images/testProduct.image.jpg">
                        <span>ìƒí’ˆ ì´ë¦„</span>
                        <span style="font-size: 16px; font-weight: bold;">10,000ì›</span>
                    </div>
                    <div class="product-item">
                        <img src="/images/testProduct.image.jpg">
                        <span>ìƒí’ˆ ì´ë¦„</span>
                        <span style="font-size: 16px; font-weight: bold;">10,000ì›</span>
                    </div>
                    <div class="product-item">
                        <img src="/images/testProduct.image.jpg">
                        <span>ìƒí’ˆ ì´ë¦„</span>
                        <span style="font-size: 16px; font-weight: bold;">10,000ì›</span>
                    </div>
                </div>


                <!-- ë”ë³´ê¸° -->
                <div class="morebtn-container">
                    <div class="box-liner2">
                        <button class="morebtn" onclick='location.href="item-sort.html"'>ë”ë³´ê¸°</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ë§ˆìš°ìŠ¤ ì»¤ì„œ -->
    <div class="cursor" style="z-index: 9999;">
        <img src="/images/logo2.png">
    </div>
    <script>
        document.addEventListener('mousemove', (e) => {
            let mouseX = e.pageX + 0; //ë§ˆìš°ìŠ¤ì— ì–¼ë§ˆë‚˜ ê°€ê¹Œì´ ë¶™ì–´ ë”°ë¼ë‹¤ë‹ˆëŠ”ê°€
            let mouseY = e.pageY + 0;

            let cursor = document.querySelector('.cursor');
            cursor.style.left = mouseX + 'px';
            cursor.style.top = mouseY + 'px';
        })
    </script>

    <script src="pages/tokenManager.js"></script>
    <!-- ë™ì  ë¡œë”© ë° ë¡œê·¸ì¸ ìƒíƒœ ì²´í¬ -->
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            // ë™ì  HTML ë¡œë”©
            async function loadHTML(url, elementId) {
                const response = await fetch(url);
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                const data = await response.text();
                document.getElementById(elementId).innerHTML = data;
            }
        
            // ë¡œê·¸ì¸ ìƒíƒœ ì²´í¬ í•¨ìˆ˜
            function checkLoginStatus(event) {
                const accessToken = localStorage.getItem('accessToken');
                if (!accessToken) {
                    event.preventDefault(); // ê¸°ë³¸ ë§í¬ ë™ì‘ ë°©ì§€
                    alert('ë¡œê·¸ì¸ì´ í•„ìš”í•œ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.');
                    location.href = '/pages/login.html'; // ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë””ë ‰ì…˜
                }
            }
        
            // header.htmlê³¼ footer.html ë¡œë”© í›„ì— ìš”ì†Œë¥¼ ì°¾ê³  ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
            await loadHTML('header.html', 'header-placeholder');
            await loadHTML('footer.html', 'footer-placeholder');
        
            // ë™ì ìœ¼ë¡œ ë¡œë“œëœ í›„ì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
            const myProfileLink = document.querySelector('.myPage');
            const cartLink = document.querySelector('.shoppingCart');
        
            if (myProfileLink) {
                myProfileLink.addEventListener('click', checkLoginStatus);
            }
        
            if (cartLink) {
                cartLink.addEventListener('click', checkLoginStatus);
            }

            // header.jsë¥¼ ë™ì ìœ¼ë¡œ ë¡œë“œëœ header.html ì´í›„ì— ì¶”ê°€
            const script = document.createElement('script');
            script.src = 'header.js';
            document.body.appendChild(script);
        });        
    </script>
    
    <script src="header.js"></script>
    <script src="main.js"></script>
</body>
<footer>
    <div id="footer-placeholder"></div>
</footer>

</html>